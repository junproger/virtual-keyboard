/** VKB SCRIPT */
// VKB KEYS DATA
const VKB_DATA = {
  ENG_DATA: {
    eng_keys: {
      Backquote: '`',
      Digit1: '1',
      Digit2: '2',
      Digit3: '3',
      Digit4: '4',
      Digit5: '5',
      Digit6: '6',
      Digit7: '7',
      Digit8: '8',
      Digit9: '9',
      Digit0: '0',
      Minus: '-',
      Equal: '=',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'q',
      KeyW: 'w',
      KeyE: 'e',
      KeyR: 'r',
      KeyT: 't',
      KeyY: 'y',
      KeyU: 'u',
      KeyI: 'i',
      KeyO: 'o',
      KeyP: 'p',
      BracketLeft: '[',
      BracketRight: ']',
      Backslash: '\\',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'a',
      KeyS: 's',
      KeyD: 'd',
      KeyF: 'f',
      KeyG: 'g',
      KeyH: 'h',
      KeyJ: 'j',
      KeyK: 'k',
      KeyL: 'l',
      Semicolon: ';',
      Quote: '\'',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'z',
      KeyX: 'x',
      KeyC: 'c',
      KeyV: 'v',
      KeyB: 'b',
      KeyN: 'n',
      KeyM: 'm',
      Comma: ',',
      Period: '.',
      Slash: '/',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    eng_caps: {
      Backquote: '`',
      Digit1: '1',
      Digit2: '2',
      Digit3: '3',
      Digit4: '4',
      Digit5: '5',
      Digit6: '6',
      Digit7: '7',
      Digit8: '8',
      Digit9: '9',
      Digit0: '0',
      Minus: '-',
      Equal: '=',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'Q',
      KeyW: 'W',
      KeyE: 'E',
      KeyR: 'R',
      KeyT: 'T',
      KeyY: 'Y',
      KeyU: 'U',
      KeyI: 'I',
      KeyO: 'O',
      KeyP: 'P',
      BracketLeft: '[',
      BracketRight: ']',
      Backslash: '\\',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'A',
      KeyS: 'S',
      KeyD: 'D',
      KeyF: 'F',
      KeyG: 'G',
      KeyH: 'H',
      KeyJ: 'J',
      KeyK: 'K',
      KeyL: 'L',
      Semicolon: ';',
      Quote: '\'',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'Z',
      KeyX: 'X',
      KeyC: 'C',
      KeyV: 'V',
      KeyB: 'B',
      KeyN: 'N',
      KeyM: 'M',
      Comma: ',',
      Period: '.',
      Slash: '/',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    eng_shift: {
      Backquote: '~',
      Digit1: '!',
      Digit2: '@',
      Digit3: '#',
      Digit4: '$',
      Digit5: '%',
      Digit6: '^',
      Digit7: '&',
      Digit8: '*',
      Digit9: '(',
      Digit0: ')',
      Minus: '_',
      Equal: '+',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'Q',
      KeyW: 'W',
      KeyE: 'E',
      KeyR: 'R',
      KeyT: 'T',
      KeyY: 'Y',
      KeyU: 'U',
      KeyI: 'I',
      KeyO: 'O',
      KeyP: 'P',
      BracketLeft: '{',
      BracketRight: '}',
      Backslash: '|',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'A',
      KeyS: 'S',
      KeyD: 'D',
      KeyF: 'F',
      KeyG: 'G',
      KeyH: 'H',
      KeyJ: 'J',
      KeyK: 'K',
      KeyL: 'L',
      Semicolon: ':',
      Quote: '"',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'Z',
      KeyX: 'X',
      KeyC: 'C',
      KeyV: 'V',
      KeyB: 'B',
      KeyN: 'N',
      KeyM: 'M',
      Comma: '<',
      Period: '>',
      Slash: '?',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    eng_caps_shift: {
      Backquote: '~',
      Digit1: '!',
      Digit2: '@',
      Digit3: '#',
      Digit4: '$',
      Digit5: '%',
      Digit6: '^',
      Digit7: '&',
      Digit8: '*',
      Digit9: '(',
      Digit0: ')',
      Minus: '_',
      Equal: '+',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'q',
      KeyW: 'w',
      KeyE: 'e',
      KeyR: 'r',
      KeyT: 't',
      KeyY: 'y',
      KeyU: 'u',
      KeyI: 'i',
      KeyO: 'o',
      KeyP: 'p',
      BracketLeft: '{',
      BracketRight: '}',
      Backslash: '|',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'a',
      KeyS: 's',
      KeyD: 'd',
      KeyF: 'f',
      KeyG: 'g',
      KeyH: 'h',
      KeyJ: 'j',
      KeyK: 'k',
      KeyL: 'l',
      Semicolon: ':',
      Quote: '"',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'z',
      KeyX: 'x',
      KeyC: 'c',
      KeyV: 'v',
      KeyB: 'b',
      KeyN: 'n',
      KeyM: 'm',
      Comma: '<',
      Period: '>',
      Slash: '?',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
  },

  RUS_DATA: {
    rus_keys: {
      Backquote: 'ё',
      Digit1: '1',
      Digit2: '2',
      Digit3: '3',
      Digit4: '4',
      Digit5: '5',
      Digit6: '6',
      Digit7: '7',
      Digit8: '8',
      Digit9: '9',
      Digit0: '0',
      Minus: '-',
      Equal: '=',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'й',
      KeyW: 'ц',
      KeyE: 'у',
      KeyR: 'к',
      KeyT: 'е',
      KeyY: 'н',
      KeyU: 'г',
      KeyI: 'ш',
      KeyO: 'щ',
      KeyP: 'з',
      BracketLeft: 'х',
      BracketRight: 'ъ',
      Backslash: '\\',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'ф',
      KeyS: 'ы',
      KeyD: 'в',
      KeyF: 'а',
      KeyG: 'п',
      KeyH: 'р',
      KeyJ: 'о',
      KeyK: 'л',
      KeyL: 'д',
      Semicolon: 'ж',
      Quote: 'э',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'я',
      KeyX: 'ч',
      KeyC: 'с',
      KeyV: 'м',
      KeyB: 'и',
      KeyN: 'т',
      KeyM: 'ь',
      Comma: 'б',
      Period: 'ю',
      Slash: '.',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    rus_caps: {
      Backquote: 'Ё',
      Digit1: '1',
      Digit2: '2',
      Digit3: '3',
      Digit4: '4',
      Digit5: '5',
      Digit6: '6',
      Digit7: '7',
      Digit8: '8',
      Digit9: '9',
      Digit0: '0',
      Minus: '-',
      Equal: '=',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'Й',
      KeyW: 'Ц',
      KeyE: 'У',
      KeyR: 'К',
      KeyT: 'Е',
      KeyY: 'Н',
      KeyU: 'Г',
      KeyI: 'Ш',
      KeyO: 'Щ',
      KeyP: 'З',
      BracketLeft: 'Х',
      BracketRight: 'Ъ',
      Backslash: '\\',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'Ф',
      KeyS: 'Ы',
      KeyD: 'В',
      KeyF: 'А',
      KeyG: 'П',
      KeyH: 'Р',
      KeyJ: 'О',
      KeyK: 'Л',
      KeyL: 'Д',
      Semicolon: 'Ж',
      Quote: 'Э',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'Я',
      KeyX: 'Ч',
      KeyC: 'С',
      KeyV: 'М',
      KeyB: 'И',
      KeyN: 'Т',
      KeyM: 'Ь',
      Comma: 'Б',
      Period: 'Ю',
      Slash: '.',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    rus_shift: {
      Backquote: 'Ё',
      Digit1: '!',
      Digit2: '"',
      Digit3: '№',
      Digit4: ';',
      Digit5: '%',
      Digit6: ':',
      Digit7: '?',
      Digit8: '*',
      Digit9: '(',
      Digit0: ')',
      Minus: '_',
      Equal: '+',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'Й',
      KeyW: 'Ц',
      KeyE: 'У',
      KeyR: 'К',
      KeyT: 'Е',
      KeyY: 'Н',
      KeyU: 'Г',
      KeyI: 'Ш',
      KeyO: 'Щ',
      KeyP: 'З',
      BracketLeft: 'Х',
      BracketRight: 'Ъ',
      Backslash: '/',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'Ф',
      KeyS: 'Ы',
      KeyD: 'В',
      KeyF: 'А',
      KeyG: 'П',
      KeyH: 'Р',
      KeyJ: 'О',
      KeyK: 'Л',
      KeyL: 'Д',
      Semicolon: 'Ж',
      Quote: 'Э',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'Я',
      KeyX: 'Ч',
      KeyC: 'С',
      KeyV: 'М',
      KeyB: 'И',
      KeyN: 'Т',
      KeyM: 'Ь',
      Comma: 'Б',
      Period: 'Ю',
      Slash: ',',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
    rus_caps_shift: {
      Backquote: 'ё',
      Digit1: '!',
      Digit2: '"',
      Digit3: '№',
      Digit4: ';',
      Digit5: '%',
      Digit6: ':',
      Digit7: '?',
      Digit8: '*',
      Digit9: '(',
      Digit0: ')',
      Minus: '_',
      Equal: '+',
      Backspace: 'Backspace',
      Tab: 'Tab',
      KeyQ: 'й',
      KeyW: 'ц',
      KeyE: 'у',
      KeyR: 'к',
      KeyT: 'е',
      KeyY: 'н',
      KeyU: 'г',
      KeyI: 'ш',
      KeyO: 'щ',
      KeyP: 'з',
      BracketLeft: 'х',
      BracketRight: 'ъ',
      Backslash: '/',
      Delete: 'Del',
      CapsLock: 'Caps Lock',
      KeyA: 'ф',
      KeyS: 'ы',
      KeyD: 'в',
      KeyF: 'а',
      KeyG: 'п',
      KeyH: 'р',
      KeyJ: 'о',
      KeyK: 'л',
      KeyL: 'д',
      Semicolon: 'ж',
      Quote: 'э',
      Enter: 'Enter',
      ShiftLeft: 'Shift',
      KeyZ: 'я',
      KeyX: 'ч',
      KeyC: 'с',
      KeyV: 'м',
      KeyB: 'и',
      KeyN: 'т',
      KeyM: 'ь',
      Comma: 'б',
      Period: 'ю',
      Slash: ',',
      ArrowUp: '▲',
      ShiftRight: 'Shift',
      ControlLeft: 'Ctrl',
      MetaLeft: 'Win',
      AltLeft: 'Alt',
      Space: 'Space',
      AltRight: 'Alt',
      ArrowLeft: '◄',
      ArrowDown: '▼',
      ArrowRight: '►',
      ControlRight: 'Ctrl',
    },
  },
};

// VKB KEYS CODES
const KEYS_CODES = [
  'Backquote',
  'Digit1',
  'Digit2',
  'Digit3',
  'Digit4',
  'Digit5',
  'Digit6',
  'Digit7',
  'Digit8',
  'Digit9',
  'Digit0',
  'Minus',
  'Equal',
  'Backspace',
  'Tab',
  'KeyQ',
  'KeyW',
  'KeyE',
  'KeyR',
  'KeyT',
  'KeyY',
  'KeyU',
  'KeyI',
  'KeyO',
  'KeyP',
  'BracketLeft',
  'BracketRight',
  'Backslash',
  'Delete',
  'CapsLock',
  'KeyA',
  'KeyS',
  'KeyD',
  'KeyF',
  'KeyG',
  'KeyH',
  'KeyJ',
  'KeyK',
  'KeyL',
  'Semicolon',
  'Quote',
  'Enter',
  'ShiftLeft',
  'KeyZ',
  'KeyX',
  'KeyC',
  'KeyV',
  'KeyB',
  'KeyN',
  'KeyM',
  'Comma',
  'Period',
  'Slash',
  'ArrowUp',
  'ShiftRight',
  'ControlLeft',
  'MetaLeft',
  'AltLeft',
  'Space',
  'AltRight',
  'ArrowLeft',
  'ArrowDown',
  'ArrowRight',
  'ControlRight',
];

class VirtualKeyboard {
  constructor(lang = 'ENG_DATA') {
    this.key_caps = false;
    this.caps_light = false;
    this.key_shift = false;
    this.shift_light = false;
    this.key_lang = lang;
    if (localStorage.getItem('junpr#8574VkbLang')) {
      this.key_lang = localStorage.getItem('junpr#8574VkbLang');
    } else {
      this.key_lang = 'ENG_DATA';
    }
  }

  createKeyBoardFrame() {
    const elementBody = document.body;
    elementBody.classList.add('body');
    elementBody.insertAdjacentHTML('afterbegin', '<div class="wrapper"></div>');
    const elementWrapper = document.querySelector('.wrapper');
    elementWrapper.insertAdjacentHTML('beforeend', '<textarea autofocus class="textarea" id="TXTAREA"></textarea>');
    this.nodeAREA = document.getElementById('TXTAREA');
    elementWrapper.insertAdjacentHTML('beforeend', '<p class="inform">Switch language: Left Ctrl + Left Shift. Keyboard designed: for Microsoft Windows 10/11.</p>');
    elementWrapper.insertAdjacentHTML('beforeend', '<div class="keyboard" id="KEYBRD"></div>');
    this.elementVKB = document.querySelector('.keyboard');
    this.createKeysFragments();
  }

  createKeysFragments() {
    const keyFragment = document.createDocumentFragment();
    for (let i = 0; i <= 63; i += 1) {
      const item = document.createElement('div');
      item.setAttribute('class', 'vkbkeys');
      if (i === 13 || i === 29 || i === 41 || i === 42 || i === 54) {
        item.classList.add('keysize_3');
      } else if (i === 0 || i === 14 || i === 28 || i === 53) {
        item.classList.add('keysize_1x');
      } else if (i === 55 || i === 59) {
        item.classList.add('keysize_2');
      } else if (i === 58) {
        item.classList.add('keysize_4');
      } else {
        item.classList.add('keysize_1');
      }
      if (i > 54 && i < 58) {
        item.classList.add('keyscolor');
      } else if (i > 58 && i < 64) {
        item.classList.add('keyscolor');
      }
      item.setAttribute('id', `${KEYS_CODES[i]}`);
      keyFragment.append(item);
    }
    this.elementVKB.append(keyFragment);
    this.createKeysLayout();
  }

  createKeysLayout() {
    const childrenVKB = document.getElementById('KEYBRD').children;
    function parseKeys(data, part) {
      if (data === 'ENG_DATA') {
        for (let j = 0; j <= 63; j += 1) {
          childrenVKB[j].textContent = VKB_DATA.ENG_DATA[`${part}`][`${KEYS_CODES[j]}`];
        }
      } else if (data === 'RUS_DATA') {
        for (let j = 0; j <= 63; j += 1) {
          childrenVKB[j].textContent = VKB_DATA.RUS_DATA[`${part}`][`${KEYS_CODES[j]}`];
        }
      }
    }
    if (this.key_lang === 'ENG_DATA' && (this.key_caps === false && this.key_shift === false)) {
      parseKeys('ENG_DATA', 'eng_keys');
    } else if (this.key_lang === 'ENG_DATA' && (this.key_caps === true && this.key_shift === true)) {
      parseKeys('ENG_DATA', 'eng_caps_shift');
    } else if (this.key_lang === 'RUS_DATA' && (this.key_caps === false && this.key_shift === false)) {
      parseKeys('RUS_DATA', 'rus_keys');
    } else if (this.key_lang === 'RUS_DATA' && (this.key_caps === true && this.key_shift === true)) {
      parseKeys('RUS_DATA', 'rus_caps_shift');
    } else if (this.key_lang === 'ENG_DATA' && this.key_caps === true) {
      parseKeys('ENG_DATA', 'eng_caps');
    } else if (this.key_lang === 'RUS_DATA' && this.key_caps === true) {
      parseKeys('RUS_DATA', 'rus_caps');
    } else if (this.key_lang === 'ENG_DATA' && this.key_shift === true) {
      parseKeys('ENG_DATA', 'eng_shift');
    } else if (this.key_lang === 'RUS_DATA' && this.key_shift === true) {
      parseKeys('RUS_DATA', 'rus_shift');
    }
  }

  printCurrentKey(code) {
    if (this.key_lang === 'ENG_DATA' && (this.key_caps === false && this.key_shift === false)) {
      this.nodeAREA.value += VKB_DATA.ENG_DATA.eng_keys[`${code}`];
    } else if (this.key_lang === 'ENG_DATA' && (this.key_caps === true && this.key_shift === true)) {
      this.nodeAREA.value += VKB_DATA.ENG_DATA.eng_caps_shift[`${code}`];
    } else if (this.key_lang === 'RUS_DATA' && (this.key_caps === false && this.key_shift === false)) {
      this.nodeAREA.value += VKB_DATA.RUS_DATA.rus_keys[`${code}`];
    } else if (this.key_lang === 'RUS_DATA' && (this.key_caps === true && this.key_shift === true)) {
      this.nodeAREA.value += VKB_DATA.RUS_DATA.rus_caps_shift[`${code}`];
    } else if (this.key_lang === 'ENG_DATA' && this.key_caps === true) {
      this.nodeAREA.value += VKB_DATA.ENG_DATA.eng_caps[`${code}`];
    } else if (this.key_lang === 'RUS_DATA' && this.key_caps === true) {
      this.nodeAREA.value += VKB_DATA.RUS_DATA.rus_caps[`${code}`];
    } else if (this.key_lang === 'ENG_DATA' && this.key_shift === true) {
      this.nodeAREA.value += VKB_DATA.ENG_DATA.eng_shift[`${code}`];
    } else if (this.key_lang === 'RUS_DATA' && this.key_shift === true) {
      this.nodeAREA.value += VKB_DATA.RUS_DATA.rus_shift[`${code}`];
    }
    this.nodeAREA.focus();
  }

  editSelectedKeys(exec) {
    const areaContent = this.nodeAREA.value;
    const finishIndex = this.nodeAREA.selectionEnd;
    const startIndex = this.nodeAREA.selectionStart;
    const valueLength = this.nodeAREA.value.length;
    const intervalLength = finishIndex - startIndex;
    if ((startIndex === finishIndex) && (intervalLength === 0)) {
      if ((exec === 'delete') && (finishIndex !== valueLength)) {
        this.nodeAREA.value = areaContent.slice(0, startIndex)
          + areaContent.slice(finishIndex + 1, valueLength);
        this.nodeAREA.selectionStart = finishIndex;
        this.nodeAREA.selectionEnd = startIndex;
        this.nodeAREA.focus();
      } else if ((exec === 'backsp') && (startIndex !== 0)) {
        this.nodeAREA.value = areaContent.slice(0, startIndex - 1)
          + areaContent.slice(finishIndex, valueLength);
        this.nodeAREA.selectionStart = finishIndex - 1;
        this.nodeAREA.selectionEnd = startIndex - 1;
        this.nodeAREA.focus();
      } else {
        this.nodeAREA.focus();
        return;
      }
    }
    if ((startIndex !== finishIndex) && (intervalLength !== 0)) {
      if ((exec === 'delete') || (exec === 'backsp')) {
        this.nodeAREA.value = areaContent.slice(0, startIndex)
          + areaContent.slice(finishIndex, valueLength);
        this.nodeAREA.selectionStart = finishIndex - intervalLength;
        this.nodeAREA.selectionEnd = startIndex;
        this.nodeAREA.focus();
      } else {
        this.nodeAREA.focus();
      }
    }
    this.nodeAREA.focus();
  }

  addEventsListeners() {
    document.addEventListener('click', (event) => this.eventMouseClick(event));
  }

  // MOUSE EVENTS
  // MOUSE CLICK ON KEYS
  eventMouseClick(event) {
    // initial statement, preventDefault
    if (KEYS_CODES.includes(event.target.id)) {
      event.preventDefault();
    } else {
      return;
    }
    // mouse caps click
    if (event.target.id === 'CapsLock') {
      if (this.key_caps === false) {
        this.key_caps = true;
        event.target.classList.add('specactive');
      } else {
        this.key_caps = false;
        event.target.classList.remove('specactive');
      }
      this.createKeysLayout();
    }
    // mouse shift click
    if ((event.target.id === 'ShiftLeft') || (event.target.id === 'ShiftRight')) {
      if (this.key_shift === false) {
        this.key_shift = true;
        event.target.classList.add('specactive');
      } else {
        this.key_shift = false;
        event.target.classList.remove('specactive');
      }
      this.createKeysLayout();
    }
    // special named keys
    switch (event.target.id) {
      case 'Backspace':
        this.editSelectedKeys('backsp');
        break;
      case 'Tab':
        this.nodeAREA.value += '    ';
        break;
      case 'Delete':
        this.editSelectedKeys('delete');
        break;
      case 'Enter':
        this.nodeAREA.value += '\n';
        break;
      case 'Space':
        this.nodeAREA.value += ' ';
        break;
      case 'CapsLock':
      case 'ShiftLeft':
      case 'ShiftRight':
      case 'ControlLeft':
      case 'MetaLeft':
      case 'AltLeft':
      case 'AltRight':
      case 'ControlRight':
        break;
      default:
        if (KEYS_CODES.includes(event.target.id) && (this.key_shift === true)) {
          this.printCurrentKey(event.target.id);
          this.key_shift = false;
          document.getElementById('ShiftLeft').classList.remove('specactive');
          document.getElementById('ShiftRight').classList.remove('specactive');
          this.createKeysLayout();
        } else if (KEYS_CODES.includes(event.target.id) && (this.key_shift === false)) {
          this.printCurrentKey(event.target.id);
        } else {
          break;
        }
        break;
    }
    this.nodeAREA.focus();
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const VKB = new VirtualKeyboard('ENG_DATA');
  VKB.createKeyBoardFrame();
  VKB.addEventsListeners();
});
